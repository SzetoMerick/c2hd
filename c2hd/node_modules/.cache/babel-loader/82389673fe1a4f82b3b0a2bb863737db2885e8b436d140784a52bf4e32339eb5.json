{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getTarget = void 0;\nconst isPlainObj = require(\"is-plain-obj\");\nconst logger_1 = require(\"./logger\");\nconst logger = (0, logger_1.getInstance)();\nasync function getTarget(req, config) {\n  let newTarget;\n  const router = config.router;\n  if (isPlainObj(router)) {\n    newTarget = getTargetFromProxyTable(req, router);\n  } else if (typeof router === 'function') {\n    newTarget = await router(req);\n  }\n  return newTarget;\n}\nexports.getTarget = getTarget;\nfunction getTargetFromProxyTable(req, table) {\n  let result;\n  const host = req.headers.host;\n  const path = req.url;\n  const hostAndPath = host + path;\n  for (const [key] of Object.entries(table)) {\n    if (containsPath(key)) {\n      if (hostAndPath.indexOf(key) > -1) {\n        // match 'localhost:3000/api'\n        result = table[key];\n        logger.debug('[HPM] Router table match: \"%s\"', key);\n        break;\n      }\n    } else {\n      if (key === host) {\n        // match 'localhost:3000'\n        result = table[key];\n        logger.debug('[HPM] Router table match: \"%s\"', host);\n        break;\n      }\n    }\n  }\n  return result;\n}\nfunction containsPath(v) {\n  return v.indexOf('/') > -1;\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","getTarget","isPlainObj","require","logger_1","logger","getInstance","req","config","newTarget","router","getTargetFromProxyTable","table","result","host","headers","path","url","hostAndPath","key","entries","containsPath","indexOf","debug","v"],"sources":["D:/Documents/VS Code Projects/c2hd/c2hd/node_modules/http-proxy-middleware/dist/router.js"],"sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getTarget = void 0;\r\nconst isPlainObj = require(\"is-plain-obj\");\r\nconst logger_1 = require(\"./logger\");\r\nconst logger = (0, logger_1.getInstance)();\r\nasync function getTarget(req, config) {\r\n    let newTarget;\r\n    const router = config.router;\r\n    if (isPlainObj(router)) {\r\n        newTarget = getTargetFromProxyTable(req, router);\r\n    }\r\n    else if (typeof router === 'function') {\r\n        newTarget = await router(req);\r\n    }\r\n    return newTarget;\r\n}\r\nexports.getTarget = getTarget;\r\nfunction getTargetFromProxyTable(req, table) {\r\n    let result;\r\n    const host = req.headers.host;\r\n    const path = req.url;\r\n    const hostAndPath = host + path;\r\n    for (const [key] of Object.entries(table)) {\r\n        if (containsPath(key)) {\r\n            if (hostAndPath.indexOf(key) > -1) {\r\n                // match 'localhost:3000/api'\r\n                result = table[key];\r\n                logger.debug('[HPM] Router table match: \"%s\"', key);\r\n                break;\r\n            }\r\n        }\r\n        else {\r\n            if (key === host) {\r\n                // match 'localhost:3000'\r\n                result = table[key];\r\n                logger.debug('[HPM] Router table match: \"%s\"', host);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction containsPath(v) {\r\n    return v.indexOf('/') > -1;\r\n}\r\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,SAAS,GAAG,KAAK,CAAC;AAC1B,MAAMC,UAAU,GAAGC,OAAO,CAAC,cAAc,CAAC;AAC1C,MAAMC,QAAQ,GAAGD,OAAO,CAAC,UAAU,CAAC;AACpC,MAAME,MAAM,GAAG,CAAC,CAAC,EAAED,QAAQ,CAACE,WAAW,GAAG;AAC1C,eAAeL,SAAS,CAACM,GAAG,EAAEC,MAAM,EAAE;EAClC,IAAIC,SAAS;EACb,MAAMC,MAAM,GAAGF,MAAM,CAACE,MAAM;EAC5B,IAAIR,UAAU,CAACQ,MAAM,CAAC,EAAE;IACpBD,SAAS,GAAGE,uBAAuB,CAACJ,GAAG,EAAEG,MAAM,CAAC;EACpD,CAAC,MACI,IAAI,OAAOA,MAAM,KAAK,UAAU,EAAE;IACnCD,SAAS,GAAG,MAAMC,MAAM,CAACH,GAAG,CAAC;EACjC;EACA,OAAOE,SAAS;AACpB;AACAV,OAAO,CAACE,SAAS,GAAGA,SAAS;AAC7B,SAASU,uBAAuB,CAACJ,GAAG,EAAEK,KAAK,EAAE;EACzC,IAAIC,MAAM;EACV,MAAMC,IAAI,GAAGP,GAAG,CAACQ,OAAO,CAACD,IAAI;EAC7B,MAAME,IAAI,GAAGT,GAAG,CAACU,GAAG;EACpB,MAAMC,WAAW,GAAGJ,IAAI,GAAGE,IAAI;EAC/B,KAAK,MAAM,CAACG,GAAG,CAAC,IAAItB,MAAM,CAACuB,OAAO,CAACR,KAAK,CAAC,EAAE;IACvC,IAAIS,YAAY,CAACF,GAAG,CAAC,EAAE;MACnB,IAAID,WAAW,CAACI,OAAO,CAACH,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE;QAC/B;QACAN,MAAM,GAAGD,KAAK,CAACO,GAAG,CAAC;QACnBd,MAAM,CAACkB,KAAK,CAAC,gCAAgC,EAAEJ,GAAG,CAAC;QACnD;MACJ;IACJ,CAAC,MACI;MACD,IAAIA,GAAG,KAAKL,IAAI,EAAE;QACd;QACAD,MAAM,GAAGD,KAAK,CAACO,GAAG,CAAC;QACnBd,MAAM,CAACkB,KAAK,CAAC,gCAAgC,EAAET,IAAI,CAAC;QACpD;MACJ;IACJ;EACJ;EACA,OAAOD,MAAM;AACjB;AACA,SAASQ,YAAY,CAACG,CAAC,EAAE;EACrB,OAAOA,CAAC,CAACF,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AAC9B"},"metadata":{},"sourceType":"script","externalDependencies":[]}